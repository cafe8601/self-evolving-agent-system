project_context:
  name: Self-Evolving Agent Expert System
  version: 1.0.0
  created_at: 2025-12-17T00:00:00Z
  tech_stack:
    - MDFlow v2.35.1
    - OpenCode v1.0.163
    - Claude Code Skills
    - Oh-My-OpenCode
  llm_models:
    planner: claude-opus-4-5
    builder: gpt-5.2
    researcher: gemini-3-pro
    reviewer: claude-opus-4-5
  rules:
    - 모든 작업 시작 전 project_brain.yaml 로드 필수
    - 작업 완료 후 learned_patterns 업데이트
    - 역할별 최적 LLM 모델 사용
    - SUCCESS_PATTERN은 적극 활용, FAILURE_PATTERN은 회피
    - 새로운 패턴 발견 시 confidence 점수 함께 기록
learned_patterns:
  - id: LP-001
    context: JWT 인증 시스템 구현
    status: SUCCESS_PATTERN
    content: |
      JWT 토큰 관리는 Singleton 패턴으로 구현하면 안정적.
      토큰 갱신 로직을 중앙화하여 일관된 상태 유지 가능.
      리프레시 토큰은 별도 스토리지(httpOnly 쿠키)에 저장.
    model_used: gpt-5.2
    learned_at: 2025-12-17T10:00:00Z
    confidence: 0.9
    tags:
      - authentication
      - jwt
      - security
    related_files:
      - auth/token-manager.ts
      - middleware/auth.ts
  - id: LP-002
    context: API 호출 시 타임아웃 처리
    status: FAILURE_PATTERN
    content: |
      axios 요청에 타임아웃을 설정하지 않으면 네트워크 지연 시
      무한 로딩 상태에 빠짐. 항상 타임아웃 설정 필수.
      권장: 일반 API 5초, 파일 업로드 30초, 백그라운드 작업 60초
    model_used: claude-opus-4-5
    learned_at: 2025-12-16T15:30:00Z
    confidence: 0.95
    tags:
      - api
      - axios
      - timeout
      - error-handling
    related_files:
      - utils/api-client.ts
  - id: LP-003
    context: 인증 미들웨어 계층 구조
    status: SUCCESS_PATTERN
    content: |
      인증 미들웨어는 기능별로 분리하면 재사용성과 유연성이 높아짐.
      - authenticate: 토큰 검증 (필수 인증)
      - authorize(...roles): RBAC 역할 기반 접근 제어
      - optionalAuth: 선택적 인증 (토큰 있으면 검증, 없어도 통과)
      - extractRefreshToken: httpOnly 쿠키에서 리프레시 토큰 추출
      이렇게 분리하면 라우트별로 필요한 미들웨어만 조합 가능.
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T01:40:00+09:00
    confidence: 0.85
    tags:
      - middleware
      - authentication
      - rbac
      - architecture
    related_files:
      - JWT 인증/middleware/auth.middleware.ts
      - JWT 인증/api/auth.routes.ts
  - id: LP-004
    context: Express Request 타입 확장
    status: SUCCESS_PATTERN
    content: |
      Express Request 객체에 커스텀 속성(user, token 등)을 추가할 때
      declare global { namespace Express { interface Request { ... } } } 사용.
      이를 통해 미들웨어 체인에서 타입 안전한 데이터 전달 가능.
      타입 파일에 정의하고 tsconfig.json에서 include 필수.
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T11:00:00+09:00
    confidence: 0.88
    tags:
      - typescript
      - express
      - middleware
      - type-safety
    related_files:
      - JMT 인증 시스템/types/auth.types.ts
  - id: LP-005
    context: Hook 기반 자동 학습 테스트
    status: SUCCESS_PATTERN
    content: Hook과 중간 파일 방식을 사용하면 세션 종료 시 자동으로 패턴이 Brain에 병합됨. 수동 업데이트 필요 없음.
    model_used: claude-opus-4-5
    learned_at: 2025-12-17T17:13:26.446Z
    confidence: 0.8
    tags:
      - automation
      - hook
      - learning
    related_files:
      - scripts/sync-brain.ts
      - scripts/add-pattern.ts
  - id: LP-006
    context: 세션 종료 Hook 자동화 검증
    status: SUCCESS_PATTERN
    content: 이 패턴이 project_brain.yaml에 LP-006으로 추가되어 있다면 Stop Hook이 정상 작동한 것임.
    model_used: claude-opus-4-5
    learned_at: 2025-12-17T17:20:36.648Z
    confidence: 0.9
    tags:
      - hook-test
      - automation
    related_files: []
  - id: LP-007
    context: SuperClaude 자동 학습 시스템 구현
    status: SUCCESS_PATTERN
    content: "Hook 기반 자동 패턴 캡처 시스템: UserPromptSubmit으로 /sc: 명령어 감지, PostToolUse로 결과 캡처, Stop hook으로 세션 종료 시 병합"
    model_used: claude-opus-4-5
    learned_at: 2025-12-17T17:25:07.855Z
    confidence: 0.85
    tags:
      - success
      - learned
      - automation
      - hooks
      - learning-system
      - sc-implement
    related_files: []
  - id: LP-008
    context: Hook 시스템 테스트
    status: SUCCESS_PATTERN
    content: UserPromptSubmit과 PostToolUse Hook을 통한 SuperClaude 명령어 자동 감지 및 패턴 캡처 파이프라인 구축 완료
    model_used: claude-opus-4-5
    learned_at: 2025-12-17T17:27:23.023Z
    confidence: 0.85
    tags:
      - success
      - learned
    related_files: []
  - id: LP-009
    context: SuperClaude /sc:implement 자동 캡처
    status: SUCCESS_PATTERN
    content: "구현 패턴: /sc:implement test 명령어 실행 성공"
    model_used: claude-opus-4-5
    learned_at: 2025-12-17T17:31:05.266Z
    confidence: 0.85
    tags:
      - implementation
      - coding
      - superclaude
      - auto-captured
    related_files: []
  - id: LP-010
    context: SuperClaude /sc:test 자동 캡처
    status: SUCCESS_PATTERN
    content: "테스트 패턴: /sc:test sample 명령어 실행 성공"
    model_used: claude-opus-4-5
    learned_at: 2025-12-17T17:33:33.396Z
    confidence: 0.85
    tags:
      - testing
      - quality
      - superclaude
      - auto-captured
    related_files: []
  - id: LP-011
    context: SuperClaude /sc:build 자동 캡처
    status: SUCCESS_PATTERN
    content: "빌드 패턴: /sc:build 명령어 실행 성공"
    model_used: claude-opus-4-5
    learned_at: 2025-12-17T17:35:16.454Z
    confidence: 0.85
    tags:
      - build
      - deployment
      - superclaude
      - auto-captured
    related_files: []
  - id: LP-012
    context: 통합 관측성 시스템 구축
    status: SUCCESS_PATTERN
    content: |
      Claude Code, OpenCode, MDFlow 통합 관측성 시스템 구축:
      - Bun 기반 HTTP/WebSocket 서버 (포트 4100)
      - SQLite WAL 모드 이벤트 저장
      - Hook 기반 이벤트 수집 (send-event.ts, wrapper 스크립트)
      - 실시간 대시보드 (WebSocket 스트림)
      - Brain 통합 (패턴 자동 감지 및 학습)
      - 참조: LangSmith @traceable 패턴, Phoenix OpenTelemetry
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T03:00:00+09:00
    confidence: 0.9
    tags:
      - observability
      - monitoring
      - websocket
      - sqlite
      - hooks
      - real-time
      - brain-integration
    related_files:
      - observability/server/index.ts
      - observability/server/db.ts
      - observability/hooks/send-event.ts
      - observability/client/dashboard.ts
      - observability/learning/pattern-detector.ts
  - id: LP-013
    context: Observability Web Dashboard UI 구현
    status: SUCCESS_PATTERN
    content: |
      Bun 서버에 정적 파일 서빙 추가 패턴:
      - import.meta.url 기반 __dirname 유도 (Bun 호환)
      - MIME_TYPES 매핑으로 Content-Type 자동 설정
      - Bun.file().exists()로 파일 존재 확인
      - 루트 경로(/)에서 index.html 서빙
      - WebSocket 실시간 업데이트와 HTTP REST API 병용
      핵심: 프론트엔드 없이 단일 HTML로 완전한 대시보드 구현 가능
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T03:15:00+09:00
    confidence: 0.88
    tags:
      - observability
      - dashboard
      - bun
      - static-file
      - websocket
      - ui
    related_files:
      - observability/server/index.ts
      - observability/client/index.html
  - id: LP-014
    context: Observatory 이벤트 상세 모달 및 에러 필터링 UI
    status: SUCCESS_PATTERN
    content: |
      대시보드에 이벤트 상세 보기와 에러 필터링 추가 패턴:
      - 모달 오버레이: position fixed, z-index 1000, 배경 rgba(0,0,0,0.8)
      - 탭 기반 필터링: All/Tools/Sessions/Errors 탭으로 이벤트 분류
      - 에러 하이라이트: border-left 빨간색, 에러 개수 배지 표시
      - 이벤트 타입별 분류: errorTypes 배열로 PostToolUseFailure, AgentError 등 감지
      - 모달 내용: Status 배지, Source, Timestamp, Session ID, Tool Name, Error Message, Full Payload
      - JSON.stringify(payload, null, 2)로 payload 가독성 있게 표시
      핵심: 클릭 이벤트로 상세 정보 모달 열기, 필터 탭으로 에러만 빠르게 확인
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T03:25:00+09:00
    confidence: 0.9
    tags:
      - observability
      - dashboard
      - modal
      - filtering
      - error-handling
      - ui-ux
    related_files:
      - observability/client/index.html
  - id: LP-015
    context: 세션 재개 및 작업 연속성 유지
    status: SUCCESS_PATTERN
    content: |
      세션이 중단된 후 재개할 때:
      1. project_brain.yaml에서 recent_workflows 확인으로 마지막 작업 파악
      2. claude-mem 컨텍스트 인덱스에서 최근 observation ID 확인
      3. 실행 중인 서비스 상태 확인 (ps aux, curl health)
      4. 중단 지점부터 작업 재개
      핵심: 항상 시스템 상태 확인 → 컨텍스트 복원 → 작업 이어가기 순서 준수
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T03:55:00+09:00
    confidence: 0.88
    tags:
      - session-management
      - context-continuity
      - workflow
      - recovery
    related_files:
      - .opencode/brain/project_brain.yaml
      - .claude/rules/learning-loop.md
  - id: LP-016
    context: Observability 에러 해결 워크플로우
    status: SUCCESS_PATTERN
    content: |
      에러 이벤트 관리 및 해결 추적 패턴:
      - GET /errors?includeResolved=false로 미해결 에러만 필터링
      - POST /events/:id/resolve에 note 포함으로 해결 방법 기록
      - WebSocket broadcast로 실시간 UI 업데이트
      - resolved_at 타임스탬프로 해결 시점 추적
      핵심: 에러 → 조사 → 해결 → 기록의 완전한 라이프사이클 관리
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T03:55:00+09:00
    confidence: 0.9
    tags:
      - observability
      - error-resolution
      - api-design
      - lifecycle-management
    related_files:
      - observability/server/index.ts
      - observability/server/db.ts
  - id: LP-017
    context: Refresh Token Rotation 보안 패턴
    status: SUCCESS_PATTERN
    content: |
      Refresh Token Rotation으로 토큰 재사용 공격 방지:
      - tokenFamily: 동일 로그인 세션의 토큰들을 그룹화
      - version: 같은 family 내에서 토큰 버전 추적 (0, 1, 2, ...)
      - 갱신 시 버전 증가: 이전 버전 토큰은 자동 무효화
      - 재사용 감지: 낮은 버전의 토큰이 사용되면 해당 family 전체 무효화
      - 토큰 해시 저장: 토큰 원본 대신 HMAC-SHA256 해시 저장
      - 이점: 탈취된 토큰 사용 시 즉시 감지 및 모든 세션 무효화
      핵심: tokenFamily + version 조합으로 토큰 탈취 공격에 대한 방어 강화
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T03:30:00+09:00
    confidence: 0.92
    tags:
      - authentication
      - security
      - jwt
      - refresh-token
      - token-rotation
      - attack-prevention
    related_files:
      - JWT 인증/auth/token-manager.ts
      - JWT 인증/types/auth.types.ts
      - JWT 인증/api/auth.routes.ts
  - id: LP-018
    context: OAuth 2.0 CSRF 방지 state 파라미터
    status: SUCCESS_PATTERN
    content: |
      OAuth 2.0 Authorization Code Flow에서 CSRF 공격 방지:
      - state 파라미터: crypto.randomBytes(32).toString('hex')로 생성
      - TTL 설정: 10분 후 자동 만료 (긴 지연 방지)
      - 일회용 사용: 검증 후 즉시 삭제로 재사용 방지
      - redirectTo 추적: state에 원래 리다이렉트 URL 저장 가능
      - 미들웨어 분리: generateOAuthState, verifyOAuthState로 재사용성 확보
      핵심: state 파라미터 없이 OAuth 콜백을 직접 호출하는 CSRF 공격 차단
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T03:30:00+09:00
    confidence: 0.9
    tags:
      - oauth
      - security
      - csrf
      - middleware
      - google
      - kakao
    related_files:
      - JWT 인증/middleware/auth.middleware.ts
      - JWT 인증/oauth/oauth-service.ts
  - id: LP-019
    context: OAuth 프로필 정규화 패턴
    status: SUCCESS_PATTERN
    content: |
      다양한 OAuth 제공자의 프로필 응답을 통일된 형식으로 변환:
      - NormalizedOAuthProfile 인터페이스로 통일
      - provider, providerId, email, name, profileImage 공통 필드
      - Google: sub → providerId, email, name, picture
      - Kakao: id → providerId, kakao_account/properties에서 추출
      - 이메일 필수 검증: OAuth에서 이메일 미제공 시 에러 처리
      - 계정 연동: 같은 이메일로 기존 사용자와 OAuth 계정 연결
      핵심: 정규화 계층으로 제공자 추가 시 코어 로직 변경 최소화
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T03:30:00+09:00
    confidence: 0.88
    tags:
      - oauth
      - google
      - kakao
      - normalization
      - adapter-pattern
      - account-linking
    related_files:
      - JWT 인증/oauth/oauth-service.ts
      - JWT 인증/types/auth.types.ts
  - id: LP-020
    context: httpOnly 쿠키 기반 토큰 보안 전략
    status: SUCCESS_PATTERN
    content: |
      XSS 공격으로부터 토큰 보호하는 쿠키 전략:
      - Refresh Token: httpOnly=true (JS 접근 불가, XSS 방어)
      - Access Token: 응답 body로 전달 (메모리에만 저장)
      - tokenFamily: httpOnly=false (프론트엔드에서 로그아웃 시 참조 필요)
      - sameSite='strict': CSRF 방어 (Cross-site 요청에서 쿠키 미전송)
      - secure=true (production): HTTPS에서만 쿠키 전송
      - 로그아웃: clearCookie로 모든 인증 쿠키 삭제
      핵심: Refresh Token은 httpOnly로 보호, Access Token은 메모리 전용
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T03:30:00+09:00
    confidence: 0.93
    tags:
      - security
      - cookies
      - xss
      - csrf
      - httponly
      - jwt
    related_files:
      - JWT 인증/api/auth.routes.ts
      - JWT 인증/middleware/auth.middleware.ts
  - id: LP-021
    context: Cursor 기반 페이지네이션 패턴
    status: SUCCESS_PATTERN
    content: |
      대용량 데이터 목록 조회 시 Cursor 페이지네이션 사용:
      - Offset 대신 마지막 ID(cursor)를 기준으로 다음 페이지 조회
      - take: limit + 1로 hasMore 판단 (limit+1번째 존재하면 다음 페이지 있음)
      - skip: 1로 cursor 다음 항목부터 조회
      - 장점: 대용량에서도 일정한 성능, 데이터 변경에 안정적
      - 단점: 특정 페이지로 직접 이동 불가
      - 응답: { items, pagination: { nextCursor, hasMore, total? } }
      핵심: 무한스크롤, 실시간 피드에 최적화된 페이지네이션
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T12:30:00+09:00
    confidence: 0.92
    tags:
      - pagination
      - cursor
      - prisma
      - performance
      - infinite-scroll
    related_files:
      - 상품 CRUD API/services/product.service.ts
      - 상품 CRUD API/types/product.types.ts
  - id: LP-022
    context: S3 Presigned URL 이미지 업로드 패턴
    status: SUCCESS_PATTERN
    content: |
      서버 부하 없이 S3에 직접 업로드하는 Presigned URL 패턴:
      - 1단계: POST /presign으로 업로드 URL 요청
      - 2단계: 클라이언트가 uploadUrl로 PUT 요청 (파일 직접 업로드)
      - 3단계: POST /images로 업로드 완료 후 DB 등록 (key, url 저장)
      - Key 형식: products/{productId}/{timestamp}-{name}-{random}.{ext}
      - expiresIn: 업로드 URL 유효기간 (기본 5분)
      - 장점: 서버 트래픽 우회, 대용량 파일 처리 용이
      - 보안: contentType 검증, 파일 크기 제한, 상품별 경로 격리
      핵심: 클라이언트 → S3 직접 업로드로 서버 부하 최소화
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T12:30:00+09:00
    confidence: 0.9
    tags:
      - s3
      - presigned-url
      - image-upload
      - aws
      - file-upload
    related_files:
      - 상품 CRUD API/services/s3-upload.service.ts
      - 상품 CRUD API/routes/product.routes.ts
  - id: LP-023
    context: Prisma 스키마 모델링 패턴
    status: SUCCESS_PATTERN
    content: |
      Prisma 스키마 설계 시 효과적인 모델링 패턴:
      - Enum 사용: ProductStatus, ProductVisibility로 상태 타입 안전성
      - 관계 설정: @relation으로 양방향 관계, onDelete: Cascade로 연쇄 삭제
      - Index 설정: 자주 필터링하는 필드에 @@index 추가 (categoryId, status, price)
      - Decimal: 가격 등 정밀 숫자는 @db.Decimal(10, 2) 사용
      - Json: dimensions 같은 유연한 구조는 Json 타입 활용
      - cuid(): 분산 환경에서 안전한 고유 ID 생성
      핵심: 타입 안전성 + 성능 인덱스 + 유연한 JSON 조합
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T12:30:00+09:00
    confidence: 0.88
    tags:
      - prisma
      - schema
      - database
      - modeling
      - index
    related_files:
      - 상품 CRUD API/prisma/schema.prisma
  - id: LP-024
    context: 비회원 장바구니 + 로그인 병합 패턴
    status: SUCCESS_PATTERN
    content: |
      비회원/회원 통합 장바구니 시스템 설계 패턴:
      - 비회원: localStorage + sessionId(쿠키) 기반
      - 회원: DB 저장 (userId 기반)
      - optionalAuth 미들웨어: 토큰 있으면 검증, 없어도 진행 (LP-003 확장)
      - 병합 전략: KEEP_GUEST, KEEP_MEMBER, MERGE_SUM, MERGE_MAX
      - 로그인 직후 프론트엔드에서 localStorage → POST /merge 호출
      - 병합 성공 시 localStorage.removeItem()으로 정리
      핵심: optionalAuth로 회원/비회원 분기, 병합 전략 선택권 제공
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T13:00:00+09:00
    confidence: 0.9
    tags:
      - cart
      - localStorage
      - merge
      - session
      - guest-user
      - authentication
    related_files:
      - 장바구니 API/services/cart.service.ts
      - 장바구니 API/middleware/cart.middleware.ts
      - 장바구니 API/client/cart-client.ts
  - id: LP-025
    context: 실시간 재고 검증 및 예약 시스템
    status: SUCCESS_PATTERN
    content: |
      장바구니 재고 검증 및 예약 패턴:
      - 추가/수정 시 즉시 재고 검증 (validateStock)
      - 재고 상태: IN_STOCK, LOW_STOCK, OUT_OF_STOCK, DISCONTINUED
      - 재고 부족 시 adjustedQuantity 제안 (자동 수량 조정)
      - 체크아웃 시 재고 예약 (StockReservation) - TTL 15분
      - 예약된 재고 = 실제 가용 재고에서 차감
      - 주문 완료/포기 시 예약 해제
      - 크론 작업으로 만료된 예약 정리
      핵심: 검증 → 예약 → 차감/해제 라이프사이클 관리
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T13:00:00+09:00
    confidence: 0.88
    tags:
      - stock
      - validation
      - reservation
      - cart
      - inventory
      - real-time
    related_files:
      - 장바구니 API/services/stock.service.ts
      - 장바구니 API/prisma/schema.prisma
  - id: LP-026
    context: 가격 스냅샷 및 변동 감지 패턴
    status: SUCCESS_PATTERN
    content: |
      장바구니 가격 추적 패턴:
      - 추가 시점 가격 스냅샷 저장 (priceSnapshot)
      - 조회 시 현재 가격과 비교 (currentPrice vs priceSnapshot)
      - 가격 변동 시 priceChanged: true + PriceChangeAlert 반환
      - 사용자에게 가격 변동 알림 제공
      - 장점: 장바구니 담은 시점 가격 보존, 투명한 가격 변동 표시
      핵심: 스냅샷 저장 → 현재가 비교 → 변동 알림
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T13:00:00+09:00
    confidence: 0.85
    tags:
      - cart
      - price
      - snapshot
      - tracking
      - alert
    related_files:
      - 장바구니 API/services/cart.service.ts
      - 장바구니 API/types/cart.types.ts
  - id: LP-027
    context: 주문 상태 머신 (Order State Machine) 패턴
    status: SUCCESS_PATTERN
    content: |
      주문 상태 전이를 유한 상태 머신(FSM)으로 관리하는 패턴:
      - Map<OrderEvent, StateTransition>으로 모든 전이 정의
      - StateTransition: { from: OrderStatus[], to: OrderStatus, trigger: string, guard?: fn, action?: fn }
      - guard: 전이 전 조건 검증 (e.g., 금액 > 0, 결제 완료 여부)
      - action: 전이 후 부수 효과 (e.g., WebSocket 브로드캐스트, 이메일 발송)
      - canTransition(): 현재 상태에서 가능한 이벤트 확인
      - transition(): 검증 → guard 체크 → 상태 변경 → action 실행
      - 이력 추적: OrderStatusHistory로 모든 상태 변경 기록
      핵심: 선언적 전이 정의 + guard/action으로 비즈니스 로직 분리
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T13:45:00+09:00
    confidence: 0.92
    tags:
      - state-machine
      - order
      - fsm
      - transition
      - guard
      - action
      - design-pattern
    related_files:
      - 실시간 주문 시스템/state-machine/order-state-machine.ts
      - 실시간 주문 시스템/types/order.types.ts
  - id: LP-028
    context: Socket.IO Room 기반 실시간 구독 패턴
    status: SUCCESS_PATTERN
    content: |
      Socket.IO Room을 활용한 실시간 상태 업데이트 패턴:
      - Room 구조: order:{orderId}로 주문별 구독 그룹화
      - 인증: connection 시 auth.token으로 JWT 검증, auth.sessionId로 비회원 지원
      - 구독 이벤트: order:subscribe (단일), orders:subscribe (다중)
      - 브로드캐스트: io.to(`order:${orderId}`).emit() - 해당 주문 구독자에게만 전송
      - 이벤트 타입: order:status_changed, payment:status_changed, shipping:updated
      - 재연결 처리: 클라이언트 reconnect 시 이전 room 재구독
      - 타입 안전성: ServerToClientEvents, ClientToServerEvents 인터페이스 정의
      핵심: Room 기반 격리로 효율적 브로드캐스트 + 타입 안전한 이벤트 처리
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T13:45:00+09:00
    confidence: 0.9
    tags:
      - websocket
      - socket.io
      - real-time
      - room
      - subscription
      - broadcast
      - event-driven
    related_files:
      - 실시간 주문 시스템/websocket/socket-server.ts
      - 실시간 주문 시스템/types/order.types.ts
  - id: LP-029
    context: Toss Payments 결제 연동 패턴
    status: SUCCESS_PATTERN
    content: |
      한국 PG사 Toss Payments API 연동 패턴:
      - 2단계 결제 플로우: 초기화(클라이언트 SDK) → 승인(서버 API)
      - 초기화: clientKey, orderId, amount, orderName → Toss SDK 호출
      - 승인: paymentKey, orderId, amount → POST /payments/confirm
      - 금액 검증: DB 주문 금액 vs 실제 결제 금액 불일치 시 거부
      - 웹훅: 가상계좌 입금, 결제 상태 변경 비동기 수신
      - 웹훅 검증: HMAC-SHA256(timestamp.body, secretKey) 서명 확인
      - Basic Auth: Base64(secretKey + ':') 형식
      - 상태 매핑: Toss 상태 → 내부 PaymentStatus 변환
      - LP-002 적용: axios 타임아웃 10초 설정
      핵심: 클라이언트 SDK → 서버 승인 → 웹훅 비동기 처리
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T13:45:00+09:00
    confidence: 0.88
    tags:
      - payment
      - toss
      - pg
      - webhook
      - korea
      - api-integration
      - hmac
    related_files:
      - 실시간 주문 시스템/services/toss-payment.service.ts
      - 실시간 주문 시스템/services/payment.service.ts
      - 실시간 주문 시스템/routes/payment.routes.ts
  - id: LP-030
    context: Optimistic Locking 동시성 제어 패턴
    status: SUCCESS_PATTERN
    content: |
      데이터베이스 동시성 충돌 방지를 위한 Optimistic Locking 패턴:
      - version 필드: Stock 테이블에 Int 타입 version 컬럼 추가
      - 읽기 시 버전 반환: API 응답에 현재 version 포함
      - 쓰기 시 버전 검증: X-Stock-Version 헤더로 클라이언트 버전 전달
      - 버전 불일치: 409 Conflict 반환 (OPTIMISTIC_LOCK_ERROR)
      - 트랜잭션 내 검증: prisma.$transaction 내에서 버전 확인 후 업데이트
      - 버전 자동 증가: 업데이트 성공 시 version: { increment: 1 }
      - 에러 응답: { expectedVersion, actualVersion, stockId } 포함
      핵심: 클라이언트가 알고 있는 버전 vs DB 실제 버전 비교로 동시성 충돌 감지
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T14:30:00+09:00
    confidence: 0.93
    tags:
      - concurrency
      - optimistic-lock
      - database
      - transaction
      - version-control
      - conflict-detection
    related_files:
      - 실시간 재고 관리/services/stock.service.ts
      - 실시간 재고 관리/prisma/schema.prisma
      - 실시간 재고 관리/middleware/auth.middleware.ts
  - id: LP-031
    context: 재고 알림 자동화 시스템 패턴
    status: SUCCESS_PATTERN
    content: |
      재고 변동에 따른 자동 알림 생성 및 해결 패턴:
      - 상태 임계값 감지: availableQuantity <= lowStockThreshold → LOW_STOCK 알림
      - 품절 감지: availableQuantity <= 0 → OUT_OF_STOCK 알림
      - 중복 방지: 같은 type + stockId로 미해결 알림 존재 시 생성 안함
      - 자동 발송: createAlert 직후 sendAlert 호출 (WebSocket + 외부 알림)
      - 자동 해결: 재고 회복 시 autoResolveAlerts로 관련 알림 일괄 해결
      - 알림 라이프사이클: PENDING → SENT → ACKNOWLEDGED → RESOLVED
      - WebSocket Room 활용: stock:{stockId} + alerts Room에 동시 발송
      핵심: 재고 변동 → 임계값 체크 → 알림 생성/해결 자동화
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T14:30:00+09:00
    confidence: 0.9
    tags:
      - stock
      - alert
      - automation
      - websocket
      - threshold
      - lifecycle
    related_files:
      - 실시간 재고 관리/services/alert.service.ts
      - 실시간 재고 관리/services/stock.service.ts
      - 실시간 재고 관리/routes/stock.routes.ts
  - id: LP-032
    context: 입고 예정 연동 시스템 패턴
    status: SUCCESS_PATTERN
    content: |
      입고 예정 정보와 실제 재고 연동 패턴:
      - incomingQuantity 캐시: Stock 테이블에 예정 입고량 합계 저장
      - 입고 예정 생성 시: Stock.incomingQuantity += quantity
      - 입고 완료 시: Stock.quantity += receivedQuantity, incomingQuantity -= original quantity
      - 취소 시: Stock.incomingQuantity -= quantity
      - 수량 불일치 처리: expectedQuantity vs receivedQuantity 차이 시 로깅/알림
      - 상태 전이: SCHEDULED → IN_TRANSIT → ARRIVED → COMPLETED (또는 CANCELLED/DELAYED)
      - 지연 자동 감지: expectedDate < now인 미완료 항목 자동 DELAYED 마킹
      - WebSocket 알림: incoming:status_changed, incoming:arrived 이벤트
      핵심: 예정 수량 캐시로 빠른 조회 + 완료 시 실제 재고 자동 증가
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T14:30:00+09:00
    confidence: 0.88
    tags:
      - stock
      - incoming
      - integration
      - cache
      - state-transition
      - websocket
    related_files:
      - 실시간 재고 관리/services/incoming-stock.service.ts
      - 실시간 재고 관리/prisma/schema.prisma
      - 실시간 재고 관리/routes/incoming-stock.routes.ts
  - id: LP-033
    context: Logger 유틸리티 설계 패턴
    status: SUCCESS_PATTERN
    content: |
      범용 Logger 클래스 구현 시 권장 패턴:
      - Singleton: 전역 인스턴스로 일관된 설정 유지 (LP-001 확장)
      - LogLevel Enum: DEBUG, INFO, WARN, ERROR, FATAL 5단계
      - 듀얼 출력: console + file 동시 지원, 개별 on/off
      - Child Logger: child(context)로 컨텍스트 상속, 중첩 가능 (Auth:DB:Users)
      - JSON 파일 로깅: 구조화된 LogEntry를 JSON Lines 형식으로 저장
      - 에러 폴백: 파일 쓰기 실패 시 콘솔로 폴백 (무한 루프 방지)
      - 타임스탬프 옵션: ISO | LOCALE | UNIX 선택 가능
      - 컬러 출력: ANSI 코드로 레벨별 색상 구분 (터미널 가독성)
      핵심: Singleton 전역 + createLogger 독립 인스턴스 조합으로 유연성 확보
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T03:51:00+09:00
    confidence: 0.88
    tags:
      - logger
      - utility
      - singleton
      - typescript
      - file-io
      - design-pattern
    related_files:
      - utils/logger.ts
      - utils/logger.example.ts
  - id: LP-034
    context: Redis Lua 기반 토큰 버킷 Rate Limiter
    status: SUCCESS_PATTERN
    content: Rate Limiter는 Redis Lua(EVALSHA + SCRIPT LOAD)로 원자적으로 토큰/타임스탬프를 갱신하고, Redis 장애 시 fail-open으로 next()를 호출해 서비스 가용성을 우선한다. 키는 sha256 해시로 길이/입력 폭주를 방지하고 TTL은 버킷 refill 시간 기반으로 설정한다.
    model_used: claude-opus-4-5
    learned_at: 2025-12-18T19:10:30.368Z
    confidence: 0.8
    tags:
      - rate-limit
      - redis
      - lua
      - express
      - middleware
      - fail-open
    related_files:
      - src/middleware/rate-limiter.ts
  - id: LP-035
    context: HAES (Hybrid AI Expert System) 아키텍처 분석
    status: SUCCESS_PATTERN
    content: |
      하이브리드 AI 전문가 시스템 아키텍처 설계 패턴:
      - 2단계 라우팅: 키워드 매칭(무료/빠름) → LLM 폴백(confidence < 0.5)
      - 실행 모드: SKILL_ONLY < SKILL_AGENT < MULTI_AGENT < PARALLEL
      - 복잡도 분석: 구현(+0.35), 병렬(+0.25/개), 협업(+0.4), 설계(+0.3)
      - 티어 구조: tier1-core(검증) → tier2-specialized(도메인) → tier3-experimental
      - SkillStore: 듀얼 모드(Vector DB + 키워드), 압축 인덱스(~2000 토큰)
      - EvolutionEngine: Jaccard 유사도 패턴 매칭, 피드백 기반 학습
      핵심: 비용 효율적 라우팅 + 진화형 학습 + 완전한 관측성
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T20:10:00+09:00
    confidence: 0.92
    tags:
      - architecture
      - haes
      - hybrid-routing
      - evolution
      - multi-agent
      - skill-system
    related_files:
      - EvoAgent-Network/src/haes/system.py
      - EvoAgent-Network/src/haes/router/hybrid_router.py
      - EvoAgent-Network/src/haes/evolution/evolution_engine.py
      - EvoAgent-Network/src/haes/stores/skill_store.py
      - EvoAgent-Network/src/haes/stores/agent_pool.py
  - id: LP-036
    context: SSE 기반 실시간 관측성 시스템
    status: SUCCESS_PATTERN
    content: |
      Server-Sent Events (SSE) 기반 실시간 모니터링 패턴:
      - SystemMonitor: 이벤트 큐 + AsyncGenerator로 구독자에게 스트리밍
      - 이벤트 타입: SYSTEM_START, CHAT_START/END, ROUTING_DECISION, SKILL_LOAD 등
      - MetricsCollector: counter, gauge, histogram, timer 4가지 메트릭 타입
      - FastAPI 통합: /api/events/stream 엔드포인트로 SSE 제공
      - 대시보드 내장: HTML 임베딩으로 별도 프론트엔드 불필요
      - 라이브 통계: get_live_dashboard()로 실시간 스킬/에이전트 사용 통계
      핵심: SSE로 양방향 통신 오버헤드 없이 실시간 업데이트 제공
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T20:10:00+09:00
    confidence: 0.88
    tags:
      - observability
      - sse
      - real-time
      - monitoring
      - metrics
      - fastapi
      - dashboard
    related_files:
      - EvoAgent-Network/src/haes/observability/monitor.py
      - EvoAgent-Network/src/haes/observability/metrics.py
      - EvoAgent-Network/observability_api.py
  - id: LP-037
    context: 진화 엔진 영속성 설계 패턴
    status: SUCCESS_PATTERN
    content: |
      EvolutionEngine 영속성 구현 패턴:
      - persist_dir: 저장 디렉토리 자동 생성
      - auto_load: 초기화 시 자동 로드 옵션
      - save()/load(): JSON/YAML 듀얼 포맷 지원
      - _serialize_state(): set→list 변환 (JSON 호환)
      - _deserialize_state(): list→set 복원 (런타임 효율성)
      - backup(): 타임스탬프 포함 백업 파일 생성
      - _dirty 플래그: 변경 추적, 불필요한 저장 방지
      - auto_save: 피드백 기록 시 자동 저장
      핵심: 세션 간 학습 연속성 + 안전한 백업/복원 라이프사이클
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T20:30:00+09:00
    confidence: 0.9
    tags:
      - persistence
      - evolution
      - json
      - yaml
      - backup
      - serialization
      - learning-continuity
    related_files:
      - EvoAgent-Network/src/haes/evolution/evolution_engine.py
      - EvoAgent-Network/tests/unit/test_evolution.py
  - id: LP-038
    context: FastAPI 글로벌 예외 핸들러 패턴
    status: SUCCESS_PATTERN
    content: |
      FastAPI 커스텀 예외 핸들링 패턴:
      - HAESError 베이스 클래스: code, message, details 표준화
      - 도메인별 예외 계층: RoutingError, SkillError, LLMError, SecurityError 등
      - @app.exception_handler(): 타입별 HTTP 상태 코드 매핑
      - to_dict(): 예외 → API 응답 자동 변환
      - 상태 코드 맵: LLMRateLimitError→429, LLMTimeoutError→504 등
      - 모니터링 통합: 예외 발생 시 monitor.emit_error() 자동 호출
      - ValueError 분리: 400 Bad Request로 처리
      - 일반 Exception: 500 + 타입명만 노출 (보안)
      핵심: 일관된 에러 응답 구조 + 자동 로깅/모니터링 통합
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T20:30:00+09:00
    confidence: 0.92
    tags:
      - fastapi
      - exception-handling
      - error-response
      - http-status
      - monitoring
      - api-design
    related_files:
      - EvoAgent-Network/src/haes/exceptions.py
      - EvoAgent-Network/observability_api.py
  - id: LP-039
    context: Git 워크플로우 및 GitHub Push
    status: SUCCESS_PATTERN
    content: |
      GitHub에 변경사항 푸시 워크플로우:
      1. git status로 현재 상태 확인
      2. git remote -v로 원격 저장소 설정 확인
      3. git diff --stat으로 변경 규모 파악
      4. git log --oneline -5로 커밋 스타일 확인
      5. git add로 필요한 파일만 선택적 스테이징
      6. Conventional Commits 형식으로 커밋 메시지 작성
         - feat/fix/docs/refactor 등 타입 명시
         - 스코프 (evolution)으로 변경 영역 표시
         - 본문에 변경사항 bullet point로 정리
      7. git push origin main으로 푸시
      핵심: 커밋 전 항상 변경 내용 확인, 명확한 메시지, 점진적 커밋
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T20:35:00+09:00
    confidence: 0.9
    tags:
      - git
      - github
      - version-control
      - workflow
    related_files:
      - EvoAgent-Network/
  - id: LP-040
    context: MDFlow CLI 호환성 수정
    status: SUCCESS_PATTERN
    content: |
      MDFlow 워크플로우 CLI 호환성 수정:
      - research.gemini.md: dangerously-skip-permissions → yolo: true
      - build.codex.md: model: codex 제거 (Codex CLI 미지원)
      - review.claude.md: model: opus 제거 (Claude CLI 미지원)
      - evolve.claude.md: model: opus 제거
      핵심: 각 CLI 도구의 실제 지원 플래그 확인 필수
    learned_at: 2025-12-19T04:16:08+09:00
    confidence: 0.85
    tags:
      - mdflow
      - cli
      - bugfix
    related_files:
      - .mdflow/research.gemini.md
      - .mdflow/build.codex.md
      - .mdflow/review.claude.md
      - .mdflow/evolve.claude.md
  - id: LP-041
    context: OpenCode explore
    status: SUCCESS_PATTERN
    content: "OpenCode explore 작업 완료: scripts 폴더 구조 확인 (소요시간: 28초)"
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T12:40:37.974Z
    confidence: 0.85
    tags:
      - success
      - learned
      - opencode
      - explore
      - terminal
    related_files: []
  - id: LP-042
    context: Bash 스크립트 테스트 패턴
    status: SUCCESS_PATTERN
    content: |
      Bash 스크립트 검증 체크리스트:
      1. 파일 권한 확인 (ls -la) - 실행 권한 필수
      2. 구문 검증 (bash -n) - 문법 오류 체크
      3. 의존성 확인 - 외부 명령어/파일 존재 여부
      4. 문자열 패턴 확인 - grep 패턴이 실제 파일 형식과 일치하는지
         예: YAML의 id: LP- vs "id: \"LP-" 형식 차이
      5. 에지 케이스 테스트 - 빈 입력, 잘못된 인자 처리
      핵심: 실제 데이터 형식을 확인 후 grep/sed 패턴 작성
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T21:45:00+09:00
    confidence: 0.88
    tags:
      - bash
      - testing
      - script-validation
      - grep-patterns
    related_files:
      - scripts/batch-features.sh
  - id: LP-043
    context: CLI 스크립트 Dry-Run 테스트 전략
    status: SUCCESS_PATTERN
    content: |
      외부 API 호출하는 스크립트 테스트 시 Dry-Run 전략:
      1. 기본 검증: 권한, 문법, 의존성 확인
      2. 옵션 테스트: -h, --help, --list 등 비파괴적 옵션 먼저
      3. 파싱 로직 분리 테스트: 핵심 로직만 별도 스크립트로 추출해서 검증
      4. 실제 호출 없이 배열/변수 처리 검증
      5. npm scripts 등 후처리 명령 존재 확인
      장점: API 비용 없이 스크립트 구조 완전 검증 가능
    model_used: claude-opus-4-5
    learned_at: 2025-12-19T21:55:00+09:00
    confidence: 0.85
    tags:
      - bash
      - testing
      - dry-run
      - api-cost-saving
    related_files:
      - scripts/crud-generator.sh
skill_integration:
  git-expert:
    path: .claude/skills/git-expert/
    triggers:
      - commit
      - branch
      - pr
      - merge
      - rebase
    description: Git 워크플로우 자동화
  refactor-expert:
    path: .claude/skills/refactor-expert/
    triggers:
      - refactor
      - clean up
      - simplify
      - extract
    description: 코드 리팩토링 전문가
  debug-expert:
    path: .claude/skills/debug-expert/
    triggers:
      - debug
      - fix
      - error
      - exception
      - traceback
    description: 버그 분석 및 수정
  api-expert:
    path: .claude/skills/api-expert/
    triggers:
      - api
      - endpoint
      - route
      - crud
      - rest
    description: REST API 개발
  project-expert:
    path: .claude/skills/project-expert/
    triggers:
      - analyze
      - learn
      - sync
      - understand
    description: 프로젝트 학습 및 지식 축적
  quick-commands:
    path: .claude/skills/quick-commands/
    triggers:
      - test
      - serve
      - format
      - lint
      - build
    description: 빠른 개발 명령
workflow_history:
  last_sync: 2025-12-19T12:40:37.975Z
  total_tasks: 17
  successful_tasks: 17
  failed_tasks: 0
  success_rate: 1
  model_usage:
    claude-opus-4-5: 20
    gpt-5.2: 0
    gemini-3-pro: 0
  recent_workflows:
    - workflow: evolve
      task: EvoAgent-Network GitHub Push
      started_at: 2025-12-19T20:35:00+09:00
      completed_at: 2025-12-19T20:40:00+09:00
      status: success
      patterns_applied:
        - LP-037
        - LP-038
      patterns_learned:
        - LP-039
      commit_hash: 350e3c6
      github_url: https://github.com/cafe8601/EvoAgent-Network
    - workflow: evolve
      task: EvoAgent-Network 개선 구현 (영속성 + 에러 핸들링)
      started_at: 2025-12-19T20:15:00+09:00
      completed_at: 2025-12-19T20:35:00+09:00
      status: success
      patterns_applied:
        - LP-035
        - LP-036
      patterns_learned:
        - LP-037
        - LP-038
      files_created:
        - EvoAgent-Network/src/haes/exceptions.py
      files_modified:
        - EvoAgent-Network/src/haes/evolution/evolution_engine.py
        - EvoAgent-Network/src/haes/__init__.py
        - EvoAgent-Network/observability_api.py
        - EvoAgent-Network/tests/unit/test_evolution.py
    - workflow: evolve
      task: EvoAgent-Network (HAES) 시스템 아키텍처 분석 및 검증
      started_at: 2025-12-19T20:00:00+09:00
      completed_at: 2025-12-19T20:10:00+09:00
      status: success
      patterns_applied: []
      patterns_learned:
        - LP-035
        - LP-036
      files_analyzed:
        - EvoAgent-Network/src/haes/system.py
        - EvoAgent-Network/src/haes/router/hybrid_router.py
        - EvoAgent-Network/src/haes/evolution/evolution_engine.py
        - EvoAgent-Network/src/haes/stores/skill_store.py
        - EvoAgent-Network/src/haes/stores/agent_pool.py
        - EvoAgent-Network/src/haes/observability/monitor.py
        - EvoAgent-Network/src/haes/observability/metrics.py
        - EvoAgent-Network/observability_api.py
        - EvoAgent-Network/tests/unit/test_router.py
        - EvoAgent-Network/tests/integration/test_system.py
    - workflow: evolve
      task: Logger 유틸리티 클래스 구현 (Singleton + Console/File 출력)
      started_at: 2025-12-19T03:45:00+09:00
      completed_at: 2025-12-19T03:51:00+09:00
      status: success
      patterns_applied:
        - LP-001
        - LP-002
        - LP-004
      patterns_learned:
        - LP-033
      files_created:
        - utils/logger.ts
        - utils/logger.example.ts
    - workflow: evolve
      task: 실시간 재고 관리 시스템 (Optimistic Locking + 재고 부족 알림 + 입고 예정 연동)
      started_at: 2025-12-19T14:00:00+09:00
      completed_at: 2025-12-19T14:30:00+09:00
      status: success
      patterns_applied:
        - LP-002
        - LP-003
        - LP-004
        - LP-021
        - LP-025
        - LP-028
      patterns_learned:
        - LP-030
        - LP-031
        - LP-032
      files_created:
        - 실시간 재고 관리/prisma/schema.prisma
        - 실시간 재고 관리/types/stock.types.ts
        - 실시간 재고 관리/services/stock.service.ts
        - 실시간 재고 관리/services/alert.service.ts
        - 실시간 재고 관리/services/incoming-stock.service.ts
        - 실시간 재고 관리/websocket/socket-server.ts
        - 실시간 재고 관리/middleware/auth.middleware.ts
        - 실시간 재고 관리/routes/stock.routes.ts
        - 실시간 재고 관리/routes/incoming-stock.routes.ts
        - 실시간 재고 관리/routes/alert.routes.ts
        - 실시간 재고 관리/index.ts
        - 실시간 재고 관리/API-USAGE.md
    - workflow: evolve
      task: 실시간 주문 시스템 (WebSocket 상태 업데이트 + Toss Payments + 주문 상태 머신)
      started_at: 2025-12-19T13:00:00+09:00
      completed_at: 2025-12-19T13:45:00+09:00
      status: success
      patterns_applied:
        - LP-002
        - LP-003
        - LP-004
        - LP-021
        - LP-025
        - LP-026
      patterns_learned:
        - LP-027
        - LP-028
        - LP-029
      files_created:
        - 실시간 주문 시스템/prisma/schema.prisma
        - 실시간 주문 시스템/types/order.types.ts
        - 실시간 주문 시스템/state-machine/order-state-machine.ts
        - 실시간 주문 시스템/websocket/socket-server.ts
        - 실시간 주문 시스템/middleware/auth.middleware.ts
        - 실시간 주문 시스템/services/toss-payment.service.ts
        - 실시간 주문 시스템/services/order.service.ts
        - 실시간 주문 시스템/services/payment.service.ts
        - 실시간 주문 시스템/routes/order.routes.ts
        - 실시간 주문 시스템/routes/payment.routes.ts
        - 실시간 주문 시스템/index.ts
        - 실시간 주문 시스템/API-USAGE.md
    - workflow: evolve
      task: 장바구니 API (비회원 localStorage + 로그인 병합 + 실시간 재고 검증)
      started_at: 2025-12-19T12:30:00+09:00
      completed_at: 2025-12-19T13:00:00+09:00
      status: success
      patterns_applied:
        - LP-002
        - LP-003
        - LP-004
        - LP-023
      patterns_learned:
        - LP-024
        - LP-025
        - LP-026
      files_created:
        - 장바구니 API/types/cart.types.ts
        - 장바구니 API/prisma/schema.prisma
        - 장바구니 API/services/stock.service.ts
        - 장바구니 API/services/cart.service.ts
        - 장바구니 API/middleware/cart.middleware.ts
        - 장바구니 API/routes/cart.routes.ts
        - 장바구니 API/client/cart-client.ts
        - 장바구니 API/index.ts
        - 장바구니 API/API-USAGE.md
    - workflow: evolve
      task: 상품 CRUD API (Prisma, Cursor Pagination, S3 Image Upload)
      started_at: 2025-12-19T12:00:00+09:00
      completed_at: 2025-12-19T12:30:00+09:00
      status: success
      patterns_applied:
        - LP-002
        - LP-003
        - LP-004
      patterns_learned:
        - LP-021
        - LP-022
        - LP-023
      files_created:
        - 상품 CRUD API/prisma/schema.prisma
        - 상품 CRUD API/types/product.types.ts
        - 상품 CRUD API/services/s3-upload.service.ts
        - 상품 CRUD API/services/product.service.ts
        - 상품 CRUD API/services/category.service.ts
        - 상품 CRUD API/routes/product.routes.ts
        - 상품 CRUD API/routes/category.routes.ts
        - 상품 CRUD API/middleware/validation.middleware.ts
        - 상품 CRUD API/index.ts
        - 상품 CRUD API/API-USAGE.md
    - workflow: evolve
      task: JWT 인증 + OAuth 소셜 로그인 + Refresh Token Rotation
      started_at: 2025-12-19T03:00:00+09:00
      completed_at: 2025-12-19T03:30:00+09:00
      status: success
      patterns_applied:
        - LP-001
        - LP-002
        - LP-003
        - LP-004
      patterns_learned:
        - LP-017
        - LP-018
        - LP-019
        - LP-020
      files_modified:
        - JWT 인증/types/auth.types.ts
        - JWT 인증/auth/token-manager.ts
        - JWT 인증/middleware/auth.middleware.ts
        - JWT 인증/api/auth.routes.ts
      files_created:
        - JWT 인증/oauth/oauth-service.ts
    - workflow: evolve
      task: JMT 인증 시스템 구현 (Project 폴더)
      started_at: 2025-12-18T11:00:00+09:00
      completed_at: 2025-12-18T11:10:00+09:00
      status: success
      patterns_applied:
        - LP-001
        - LP-002
        - LP-003
      patterns_learned:
        - LP-004
      files_created:
        - Project/JMT 인증 시스템/types/auth.types.ts
        - Project/JMT 인증 시스템/auth/token-manager.ts
        - Project/JMT 인증 시스템/middleware/auth.middleware.ts
        - Project/JMT 인증 시스템/utils/api-client.ts
        - Project/JMT 인증 시스템/api/auth.routes.ts
        - Project/JMT 인증 시스템/index.ts
    - workflow: evolve
      task: JWT 기반 사용자 인증 시스템 구현
      started_at: 2025-12-18T01:30:00+09:00
      completed_at: 2025-12-18T01:40:00+09:00
      status: success
      patterns_applied:
        - LP-001
        - LP-002
      patterns_learned:
        - LP-003
      files_created:
        - JWT 인증/types/auth.types.ts
        - JWT 인증/auth/token-manager.ts
        - JWT 인증/middleware/auth.middleware.ts
        - JWT 인증/utils/api-client.ts
        - JWT 인증/api/auth.routes.ts
metrics:
  patterns_learned: 43
  patterns_applied: 35
  evolution_cycles: 26
  confidence_average: 0.884
  by_status:
    success_patterns: 42
    failure_patterns: 1
  by_tag:
    authentication: 4
    jwt: 3
    security: 4
    api: 1
    axios: 1
    timeout: 1
    error-handling: 2
    middleware: 4
    rbac: 1
    architecture: 2
    typescript: 2
    express: 2
    type-safety: 1
    automation: 4
    hook: 1
    learning: 1
    hook-test: 1
    success: 3
    learned: 3
    hooks: 2
    learning-system: 1
    sc-implement: 1
    implementation: 1
    coding: 1
    superclaude: 3
    auto-captured: 3
    testing: 1
    quality: 1
    build: 1
    deployment: 1
    observability: 5
    monitoring: 3
    websocket: 5
    sqlite: 1
    real-time: 4
    brain-integration: 1
    dashboard: 3
    bun: 1
    static-file: 1
    ui: 1
    modal: 1
    filtering: 1
    ui-ux: 1
    session-management: 1
    context-continuity: 1
    workflow: 2
    recovery: 1
    error-resolution: 1
    api-design: 2
    lifecycle-management: 1
    refresh-token: 1
    token-rotation: 1
    attack-prevention: 1
    oauth: 2
    csrf: 2
    google: 2
    kakao: 2
    normalization: 1
    adapter-pattern: 1
    account-linking: 1
    cookies: 1
    xss: 1
    httponly: 1
    pagination: 1
    cursor: 1
    prisma: 2
    performance: 1
    infinite-scroll: 1
    s3: 1
    presigned-url: 1
    image-upload: 1
    aws: 1
    file-upload: 1
    schema: 1
    database: 2
    modeling: 1
    index: 1
    cart: 3
    localStorage: 1
    merge: 1
    session: 1
    guest-user: 1
    stock: 3
    validation: 1
    reservation: 1
    inventory: 1
    price: 1
    snapshot: 1
    tracking: 1
    alert: 2
    state-machine: 1
    order: 1
    fsm: 1
    transition: 1
    guard: 1
    action: 1
    design-pattern: 2
    socket.io: 1
    room: 1
    subscription: 1
    broadcast: 1
    event-driven: 1
    payment: 1
    toss: 1
    pg: 1
    webhook: 1
    korea: 1
    api-integration: 1
    hmac: 1
    concurrency: 1
    optimistic-lock: 1
    transaction: 1
    version-control: 2
    conflict-detection: 1
    threshold: 1
    lifecycle: 1
    incoming: 1
    integration: 1
    cache: 1
    state-transition: 1
    logger: 1
    utility: 1
    singleton: 1
    file-io: 1
    rate-limit: 1
    redis: 1
    lua: 1
    fail-open: 1
    haes: 1
    hybrid-routing: 1
    evolution: 2
    multi-agent: 1
    skill-system: 1
    sse: 1
    metrics: 1
    fastapi: 2
    persistence: 1
    json: 1
    yaml: 1
    backup: 1
    serialization: 1
    learning-continuity: 1
    exception-handling: 1
    error-response: 1
    http-status: 1
    git: 1
    github: 1
    mdflow: 1
    cli: 1
    bugfix: 1
    opencode: 1
    explore: 1
    terminal: 1
config:
  max_patterns: 100
  min_confidence_to_keep: 0.5
  auto_archive_after_days: 90
  default_timeout_seconds: 300
  parallel_execution: true
  auto_learn: true
  notify_on_failure_pattern: true
  notify_on_low_confidence: 0.6
